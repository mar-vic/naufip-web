{% extends "base.html" %}
{% block content_title %}{% endblock %}
{% block content %}

<!-- GENERATE HOMEPAGE -->
{% if output_file == "index.html" %}
{% include "./partials/_homepage.html" %}
{% endif %}

<!-- GNEREATE NON-HOMEPAGE INDEXES -->
{% if dates_page and not output_file == "index.html" %} <!-- TESTS IF NOT INDEX AND IF PAGINATED -->

{% if dates_page.number == 1 %} <!-- TESTS IF ON FIRST PAGE -->
{% set article = articles_paginator.object_list[0] %}
<section id="featured-article" class="body"> <!-- FIRST ARTICLE ON FIRST PAGE IS FEATURED -->
  <article>

    <header>
      <h1 class="entry-title"><a href="{{ SITEURL }}/{{ article.url }}">{{ article.title }}</a></h1>
		  {% include 'article_infos.html' %}
    </header>

    {{ article.content }}

    <div class="d-grid gap-2 d-md-flex justify-content-md-end">
      <a href="{{ SITEURL }}/{{ article.url }}" class="p-2 btn btn-outline-success"><b>Full article</b></a>
    </div>

  </article>
</section>

{% if articles_paginator.object_list | length > 1 %} <!-- TESTS IF THERE ARE MORE ARTICLES -->
<section class="section-title body">
  <h2>previous articles</h2>
</section>
{% endif %} <!-- END MORE ARTICLES TEST -->
{% endif %} <!-- END FIRST PAGE TEST -->


<section id="content" class="body">
  <ol id="posts-list" class="hfeed">
    {% for article in dates_page.object_list %} <!-- ITERATE THROUGH ARTICLES OF CURRENT PAGE -->
    {% if not (dates_page.number == 1 and loop.index == 1) %} <!-- FIRST ARTICLE ON THE FIRST PAGE IS ALREADY RENDERED -->
    <li>
      <article class="hentry">

        <header>
          <h2 class="small-entry-title">
            <a href="{{ SITEURL }}/{{ article.url }}"
               rel="bookmark"
               title="Permalink to {{ article.title|striptags }}">
              {{ article.title }}
            </a>
          </h2>
	        {% include 'article_infos.html' %}
        </header>

        <div class="entry-content">
          {{ article.summary }}
        </div><!-- /.entry-content -->
      </article>

      {% if not loop.last  %}
      <hr class="hr1">
      {% endif %}

    </li>

    {% endif %}
    {% endfor %}
  </ol><!-- /#posts-list -->

  {% if dates_paginator %}
  {% include "./partials/_pagination.html" %}
  {% endif %}
</section><!-- /#content -->
{% endif %}
{% endblock content %}
